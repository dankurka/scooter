<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Controllerboard for balancing Scooter, Testsuite: UART Library</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>UART Library</h1>Interrupt UART library using the built-in UART with transmit and receive circular buffers.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#g367ff7b5de225ed936a63239ad4adb0b">UART_BAUD_SELECT</a>(baudRate, xtalCpu)&nbsp;&nbsp;&nbsp;((xtalCpu)/((baudRate)*16l)-1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">UART Baudrate Expression.  <a href="#g367ff7b5de225ed936a63239ad4adb0b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#g1a02d45130520cb651ab313e69039382">UART_BAUD_SELECT_DOUBLE_SPEED</a>(baudRate, xtalCpu)&nbsp;&nbsp;&nbsp;(((xtalCpu)/((baudRate)*8l)-1)|0x8000)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">UART Baudrate Expression for ATmega double speed mode.  <a href="#g1a02d45130520cb651ab313e69039382"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#g5bdd6772c246436bb14377095de79b31">UART_RX_BUFFER_SIZE</a>&nbsp;&nbsp;&nbsp;32</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#g05f5d709605c6317c97e4974bec3402a">UART_TX_BUFFER_SIZE</a>&nbsp;&nbsp;&nbsp;32</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#gbcdb1041d763560cd8f8e722370dfd37">UART_FRAME_ERROR</a>&nbsp;&nbsp;&nbsp;0x0800</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#g3183177e3613d8785d8cc8516931beb6">UART_OVERRUN_ERROR</a>&nbsp;&nbsp;&nbsp;0x0400</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#g94758f3dad6864703b7417d3e40f11df">UART_BUFFER_OVERFLOW</a>&nbsp;&nbsp;&nbsp;0x0200</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#g77ba544d423ff42d400220a05303f268">UART_NO_DATA</a>&nbsp;&nbsp;&nbsp;0x0100</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#ge9e143569df2285379bc55f9f5595bf9">uart_puts_P</a>(__s)&nbsp;&nbsp;&nbsp;uart_puts_p(PSTR(__s))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Macro to automatically put a string constant into program memory.  <a href="#ge9e143569df2285379bc55f9f5595bf9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#gabd7a5b0c15611ee9ecb2873cc9ee87a">uart1_puts_P</a>(__s)&nbsp;&nbsp;&nbsp;uart1_puts_p(PSTR(__s))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Macro to automatically put a string constant into program memory.  <a href="#gabd7a5b0c15611ee9ecb2873cc9ee87a"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#gc7b3df0fa68526d64c732d5f916e34b1">init_uart</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#gc19a76bb7d446125734a67f9f4b68991">uart_init</a> (unsigned int baudrate)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize UART and set baudrate.  <a href="#gc19a76bb7d446125734a67f9f4b68991"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#gefaab30a8338ec46a6be35b99b1b4f09">uart_getc</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get received byte from ringbuffer.  <a href="#gefaab30a8338ec46a6be35b99b1b4f09"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#gd975221bc08b901e4c7ad69f9c9a97e2">uart_putc</a> (unsigned char data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Put byte to ringbuffer for transmitting via UART.  <a href="#gd975221bc08b901e4c7ad69f9c9a97e2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#ge52facc0a56086a365bb0018160d8d71">uart_puts</a> (const char *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Put string to ringbuffer for transmitting via UART.  <a href="#ge52facc0a56086a365bb0018160d8d71"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#g6d78b6744db6232f52b4616402036c2f">uart_puts_p</a> (const char *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Put string from program memory to ringbuffer for transmitting via UART.  <a href="#g6d78b6744db6232f52b4616402036c2f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#g4db697cb5469fd70e794fa7df73a6d6a">uart1_init</a> (unsigned int baudrate)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize USART1 (only available on selected ATmegas).  <a href="#g4db697cb5469fd70e794fa7df73a6d6a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#geb1405c641e5bc9b7224018f5e8d90de">uart1_getc</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get received byte of USART1 from ringbuffer. (only available on selected ATmega).  <a href="#geb1405c641e5bc9b7224018f5e8d90de"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#gb465f689d197fadfbacc374fc9411154">uart1_putc</a> (unsigned char data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Put byte to ringbuffer for transmitting via USART1 (only available on selected ATmega).  <a href="#gb465f689d197fadfbacc374fc9411154"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#g5568f8f3913b218fd4d0346af78831b2">uart1_puts</a> (const char *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Put string to ringbuffer for transmitting via USART1 (only available on selected ATmega).  <a href="#g5568f8f3913b218fd4d0346af78831b2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pfleury__uart.html#g1e8074d0a2d5922601c5db2f9777ba79">uart1_puts_p</a> (const char *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Put string from program memory to ringbuffer for transmitting via USART1 (only available on selected ATmega).  <a href="#g1e8074d0a2d5922601c5db2f9777ba79"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Interrupt UART library using the built-in UART with transmit and receive circular buffers. 
<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;<a class="code" href="uart_8h.html">uart.h</a>&gt;</span> 
</pre></div><p>
This library can be used to transmit and receive data through the built in UART.<p>
An interrupt is generated when the UART has finished transmitting or receiving a byte. The interrupt handling routines use circular buffers for buffering received and transmitted data.<p>
The UART_RX_BUFFER_SIZE and UART_TX_BUFFER_SIZE constants define the size of the circular buffers in bytes. Note that these constants must be a power of 2. You may need to adapt this constants to your target and your application by adding CDEFS += -DUART_RX_BUFFER_SIZE=nn -DUART_RX_BUFFER_SIZE=nn to your Makefile.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Based on Atmel Application Note AVR306 </dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Peter Fleury <a href="mailto:pfleury@gmx.ch">pfleury@gmx.ch</a> <a href="http://jump.to/fleury">http://jump.to/fleury</a> </dd></dl>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="gabd7a5b0c15611ee9ecb2873cc9ee87a"></a><!-- doxytag: member="uart.h::uart1_puts_P" ref="gabd7a5b0c15611ee9ecb2873cc9ee87a" args="(__s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define uart1_puts_P          </td>
          <td>(</td>
          <td class="paramtype">__s&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;uart1_puts_p(PSTR(__s))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Macro to automatically put a string constant into program memory. 
<p>

<p>
Definition at line <a class="el" href="uart_8h-source.html#l00203">203</a> of file <a class="el" href="uart_8h-source.html">uart.h</a>.
<p>
Referenced by <a class="el" href="main_8c-source.html#l00156">print_status()</a>.
</div>
</div><p>
<a class="anchor" name="g367ff7b5de225ed936a63239ad4adb0b"></a><!-- doxytag: member="uart.h::UART_BAUD_SELECT" ref="g367ff7b5de225ed936a63239ad4adb0b" args="(baudRate, xtalCpu)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_BAUD_SELECT          </td>
          <td>(</td>
          <td class="paramtype">baudRate,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">xtalCpu&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;((xtalCpu)/((baudRate)*16l)-1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
UART Baudrate Expression. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>xtalCpu</em>&nbsp;</td><td>system clock in Mhz, e.g. 4000000L for 4Mhz </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>baudRate</em>&nbsp;</td><td>baudrate in bps, e.g. 1200, 2400, 9600 </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="uart_8h-source.html#l00072">72</a> of file <a class="el" href="uart_8h-source.html">uart.h</a>.
</div>
</div><p>
<a class="anchor" name="g1a02d45130520cb651ab313e69039382"></a><!-- doxytag: member="uart.h::UART_BAUD_SELECT_DOUBLE_SPEED" ref="g1a02d45130520cb651ab313e69039382" args="(baudRate, xtalCpu)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_BAUD_SELECT_DOUBLE_SPEED          </td>
          <td>(</td>
          <td class="paramtype">baudRate,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">xtalCpu&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(((xtalCpu)/((baudRate)*8l)-1)|0x8000)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
UART Baudrate Expression for ATmega double speed mode. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>xtalCpu</em>&nbsp;</td><td>system clock in Mhz, e.g. 4000000L for 4Mhz </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>baudRate</em>&nbsp;</td><td>baudrate in bps, e.g. 1200, 2400, 9600 </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="uart_8h-source.html#l00078">78</a> of file <a class="el" href="uart_8h-source.html">uart.h</a>.
</div>
</div><p>
<a class="anchor" name="g94758f3dad6864703b7417d3e40f11df"></a><!-- doxytag: member="uart.h::UART_BUFFER_OVERFLOW" ref="g94758f3dad6864703b7417d3e40f11df" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_BUFFER_OVERFLOW&nbsp;&nbsp;&nbsp;0x0200          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="uart_8h-source.html#l00100">100</a> of file <a class="el" href="uart_8h-source.html">uart.h</a>.
</div>
</div><p>
<a class="anchor" name="gbcdb1041d763560cd8f8e722370dfd37"></a><!-- doxytag: member="uart.h::UART_FRAME_ERROR" ref="gbcdb1041d763560cd8f8e722370dfd37" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_FRAME_ERROR&nbsp;&nbsp;&nbsp;0x0800          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="uart_8h-source.html#l00098">98</a> of file <a class="el" href="uart_8h-source.html">uart.h</a>.
</div>
</div><p>
<a class="anchor" name="g77ba544d423ff42d400220a05303f268"></a><!-- doxytag: member="uart.h::UART_NO_DATA" ref="g77ba544d423ff42d400220a05303f268" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_NO_DATA&nbsp;&nbsp;&nbsp;0x0100          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="uart_8h-source.html#l00101">101</a> of file <a class="el" href="uart_8h-source.html">uart.h</a>.
</div>
</div><p>
<a class="anchor" name="g3183177e3613d8785d8cc8516931beb6"></a><!-- doxytag: member="uart.h::UART_OVERRUN_ERROR" ref="g3183177e3613d8785d8cc8516931beb6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_OVERRUN_ERROR&nbsp;&nbsp;&nbsp;0x0400          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="uart_8h-source.html#l00099">99</a> of file <a class="el" href="uart_8h-source.html">uart.h</a>.
</div>
</div><p>
<a class="anchor" name="ge9e143569df2285379bc55f9f5595bf9"></a><!-- doxytag: member="uart.h::uart_puts_P" ref="ge9e143569df2285379bc55f9f5595bf9" args="(__s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define uart_puts_P          </td>
          <td>(</td>
          <td class="paramtype">__s&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;uart_puts_p(PSTR(__s))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Macro to automatically put a string constant into program memory. 
<p>

<p>
Definition at line <a class="el" href="uart_8h-source.html#l00188">188</a> of file <a class="el" href="uart_8h-source.html">uart.h</a>.
<p>
Referenced by <a class="el" href="main_8c-source.html#l00163">main()</a>, <a class="el" href="monitor_8c-source.html#l00043">monitor()</a>, and <a class="el" href="main_8c-source.html#l00156">print_status()</a>.
</div>
</div><p>
<a class="anchor" name="g5bdd6772c246436bb14377095de79b31"></a><!-- doxytag: member="uart.h::UART_RX_BUFFER_SIZE" ref="g5bdd6772c246436bb14377095de79b31" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_RX_BUFFER_SIZE&nbsp;&nbsp;&nbsp;32          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Size of the circular receive buffer, must be power of 2 
<p>
Definition at line <a class="el" href="uart_8h-source.html#l00083">83</a> of file <a class="el" href="uart_8h-source.html">uart.h</a>.
</div>
</div><p>
<a class="anchor" name="g05f5d709605c6317c97e4974bec3402a"></a><!-- doxytag: member="uart.h::UART_TX_BUFFER_SIZE" ref="g05f5d709605c6317c97e4974bec3402a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_TX_BUFFER_SIZE&nbsp;&nbsp;&nbsp;32          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Size of the circular transmit buffer, must be power of 2 
<p>
Definition at line <a class="el" href="uart_8h-source.html#l00087">87</a> of file <a class="el" href="uart_8h-source.html">uart.h</a>.
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gc7b3df0fa68526d64c732d5f916e34b1"></a><!-- doxytag: member="uart.h::init_uart" ref="gc7b3df0fa68526d64c732d5f916e34b1" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_uart           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize the UART-Interfaces of Scooter controller Board <dl class="return" compact><dt><b>Returns:</b></dt><dd>none </dd></dl>

<p>
Referenced by <a class="el" href="main_8c-source.html#l00163">main()</a>.
</div>
</div><p>
<a class="anchor" name="geb1405c641e5bc9b7224018f5e8d90de"></a><!-- doxytag: member="uart.h::uart1_getc" ref="geb1405c641e5bc9b7224018f5e8d90de" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int uart1_getc           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get received byte of USART1 from ringbuffer. (only available on selected ATmega). 
<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group__pfleury__uart.html#gefaab30a8338ec46a6be35b99b1b4f09">uart_getc</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="g4db697cb5469fd70e794fa7df73a6d6a"></a><!-- doxytag: member="uart.h::uart1_init" ref="g4db697cb5469fd70e794fa7df73a6d6a" args="(unsigned int baudrate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart1_init           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>baudrate</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize USART1 (only available on selected ATmegas). 
<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group__pfleury__uart.html#gc19a76bb7d446125734a67f9f4b68991">uart_init</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="gb465f689d197fadfbacc374fc9411154"></a><!-- doxytag: member="uart.h::uart1_putc" ref="gb465f689d197fadfbacc374fc9411154" args="(unsigned char data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart1_putc           </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>data</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Put byte to ringbuffer for transmitting via USART1 (only available on selected ATmega). 
<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group__pfleury__uart.html#gd975221bc08b901e4c7ad69f9c9a97e2">uart_putc</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="g5568f8f3913b218fd4d0346af78831b2"></a><!-- doxytag: member="uart.h::uart1_puts" ref="g5568f8f3913b218fd4d0346af78831b2" args="(const char *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart1_puts           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Put string to ringbuffer for transmitting via USART1 (only available on selected ATmega). 
<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group__pfleury__uart.html#ge52facc0a56086a365bb0018160d8d71">uart_puts</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="g1e8074d0a2d5922601c5db2f9777ba79"></a><!-- doxytag: member="uart.h::uart1_puts_p" ref="g1e8074d0a2d5922601c5db2f9777ba79" args="(const char *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart1_puts_p           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Put string from program memory to ringbuffer for transmitting via USART1 (only available on selected ATmega). 
<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group__pfleury__uart.html#g6d78b6744db6232f52b4616402036c2f">uart_puts_p</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="gefaab30a8338ec46a6be35b99b1b4f09"></a><!-- doxytag: member="uart.h::uart_getc" ref="gefaab30a8338ec46a6be35b99b1b4f09" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int uart_getc           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get received byte from ringbuffer. 
<p>
Returns in the lower byte the received character and in the higher byte the last receive error. UART_NO_DATA is returned when no data is available.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>void</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>lower byte: received byte from ringbuffer <p>
higher byte: last receive status<ul>
<li><b>0</b> successfully received data from UART</li><li><b>UART_NO_DATA</b> <br>
no receive data available</li><li><b>UART_BUFFER_OVERFLOW</b> <br>
Receive ringbuffer overflow. We are not reading the receive buffer fast enough, one or more received character have been dropped</li><li><b>UART_OVERRUN_ERROR</b> <br>
Overrun condition by UART. A character already present in the UART UDR register was not read by the interrupt handler before the next character arrived, one or more received characters have been dropped.</li><li><b>UART_FRAME_ERROR</b> <br>
Framing Error by UART </li></ul>
</dd></dl>

</div>
</div><p>
<a class="anchor" name="gc19a76bb7d446125734a67f9f4b68991"></a><!-- doxytag: member="uart.h::uart_init" ref="gc19a76bb7d446125734a67f9f4b68991" args="(unsigned int baudrate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_init           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>baudrate</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize UART and set baudrate. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>baudrate</em>&nbsp;</td><td>Specify baudrate using macro <a class="el" href="group__pfleury__uart.html#g367ff7b5de225ed936a63239ad4adb0b">UART_BAUD_SELECT()</a> </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>none </dd></dl>

</div>
</div><p>
<a class="anchor" name="gd975221bc08b901e4c7ad69f9c9a97e2"></a><!-- doxytag: member="uart.h::uart_putc" ref="gd975221bc08b901e4c7ad69f9c9a97e2" args="(unsigned char data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_putc           </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>data</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Put byte to ringbuffer for transmitting via UART. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>byte to be transmitted </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>none </dd></dl>

</div>
</div><p>
<a class="anchor" name="ge52facc0a56086a365bb0018160d8d71"></a><!-- doxytag: member="uart.h::uart_puts" ref="ge52facc0a56086a365bb0018160d8d71" args="(const char *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_puts           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Put string to ringbuffer for transmitting via UART. 
<p>
The string is buffered by the uart library in a circular buffer and one character at a time is transmitted to the UART using interrupts. Blocks if it can not write the whole string into the circular buffer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>string to be transmitted </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>none </dd></dl>

<p>
Referenced by <a class="el" href="transceiver__mac_8c-source.html#l00084">cca_modus()</a>, <a class="el" href="monitor_8c-source.html#l00043">monitor()</a>, <a class="el" href="adc_8c-source.html#l00094">print_all_adc()</a>, and <a class="el" href="stabilizer_8c-source.html#l00045">stabilizer_loop()</a>.
</div>
</div><p>
<a class="anchor" name="g6d78b6744db6232f52b4616402036c2f"></a><!-- doxytag: member="uart.h::uart_puts_p" ref="g6d78b6744db6232f52b4616402036c2f" args="(const char *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_puts_p           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Put string from program memory to ringbuffer for transmitting via UART. 
<p>
The string is buffered by the uart library in a circular buffer and one character at a time is transmitted to the UART using interrupts. Blocks if it can not write the whole string into the circular buffer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>program memory string to be transmitted </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>none </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group__pfleury__uart.html#ge9e143569df2285379bc55f9f5595bf9">uart_puts_P</a> </dd></dl>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Mon Dec 18 23:32:34 2006 for Controllerboard for balancing Scooter, Testsuite by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
